!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.silhouette=t():e.silhouette=t()}(this,function(){return(e=>{function t(n){if(r[n])return r[n].exports;var o=r[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var r={};return t.m=e,t.c=r,t.d=((e,r,n)=>{t.o(e,r)||Object.defineProperty(e,r,{configurable:!1,enumerable:!0,get:n})}),t.n=(e=>{var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r}),t.o=((e,t)=>Object.prototype.hasOwnProperty.call(e,t)),t.p="",t(t.s=0)})([function(e,t,r){"use strict";function n(e,t){return e instanceof Object||e instanceof Array?Object.keys(e).reduce((r,o)=>r&&t[o]&&n(e[o],t[o]),void 0!==t):!!t}function o(){class e{[_](t,r){let n=new e;return n[d]=t?[...t[d],r]:[],n[y]={},void 0!==t&&(t[r]=n),n}define(e,...t){(0,l.view)((0,l.compose)(...t.map(e=>(0,l.lens)(t=>t[e],(e,t)=>t)),n.bind(null,e)),this)||this[b].dispatch({type:p,val:e,path:[...this[d],...t]})}remove(...e){this[b].dispatch({type:f,path:[...this[d],...e]})}dispatch(e,t,r=!1){this[b].dispatch(Object.assign({type:e,[d]:r?this[d]:[]},t))}extend(e,t,r=!1){Object,this[y][e]=t}[h](){}}return e}function i({state:e,sil:t,action:r}){let n=e;if(t[y][r.type]&&(n=t[y][r.type](e,r)),void 0===n)throw new Error("Reducer returned undefined; are you missing a return statement?");n!==e&&(Object.keys(t).forEach(e=>{n.hasOwnProperty(e)||(t[e][h]({done:!0}),delete t[e])}),Object.keys(n).forEach(e=>{t.hasOwnProperty(e)||t[_](t,e)}));let o=Object.keys(n)[Symbol.iterator](),c=(0,l.view)((0,l.compose)((0,l.each)(),e=>{let n=o.next().value;return{state:e,action:r,sil:t[n]||t[_](t,n)}},i),n);return c!=e&&t[h]({done:!1,value:c}),c}function c(e){return(0,l.optic)(({state:t,sil:r,action:n},o)=>(0,l.view)((0,l.compose)(e,i=>{r[e]||r[_](r,e);let c=o({state:i||{},sil:r[e],action:n});return c!==t&&r[e][h]({done:!1,value:c}),c}),t))}function s(e){return(0,l.optic)(({state:t,sil:r})=>(Object.keys(e).forEach(t=>{r&&r.hasOwnProperty(t)||(r[_](r,t),(0,l.view)(s(e[t]),{state:void 0,sil:r[t]}))}),e!==t&&r[h]({done:!1,value:e}),e))}function u(e){return(0,l.optic)(({state:t,sil:r})=>{let n=t;return t.hasOwnProperty(e)&&(delete(n=Object.keys(t).reduce((e,r)=>(e[r]=t[r],e),{}))[e],r[e][h]({done:!0}),delete r[e]),n})}function a(e,t={},r){let n,o,a=e.prototype[m];switch(r.type){case p:({val:o,path:n}=r);let e=(0,l.compose)(...n.map(c),s(o));return(0,l.view)(e,{state:t,sil:a});case f:({path:n}=r);let y=u(n.pop()),h=(0,l.compose)(...n.map(c),y);return(0,l.view)(h,{state:t,sil:a});default:n=r[d];let b=(0,l.compose)(...n.map(c),i);return(0,l.view)(b,{state:t,sil:a,action:r})}}Object.defineProperty(t,"__esModule",{value:!0}),t.create=function(...e){let t={Silhouette:o(),createStore(e){let t={};return{dispatch(r){t=e(t,r)}}},createSil(e){let r=t.Silhouette.prototype[_]();return t.Silhouette.prototype[b]=e,t.Silhouette.prototype[m]=r,r},symbols:{__push__:h,__create__:_,__reducers__:y,__path__:d,__store__:b,__root__:m,__DEFINE__:p,__REMOVE__:f}};Object.keys(t).filter(e=>t[e]instanceof Function).forEach(r=>{e.map(e=>e[r]).filter(e=>e).reverse().forEach(e=>{t[r]=e(t[r],t)})});let r=a.bind(void 0,t.Silhouette),n=t.createStore(r);return t.createSil(n)};var l=r(1);const p=Symbol("__DEFINE__"),f=Symbol("__REMOVE__"),d=Symbol("path"),y=Symbol("reducers"),h=Symbol("push"),b=Symbol("store"),m=Symbol("root"),_=Symbol("create")},function(e,t,r){"use strict";((t,r)=>{e.exports=r()})(0,function(){return(e=>{function t(n){if(r[n])return r[n].exports;var o=r[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var r={};return t.m=e,t.c=r,t.d=((e,r,n)=>{t.o(e,r)||Object.defineProperty(e,r,{configurable:!1,enumerable:!0,get:n})}),t.n=(e=>{var r=e&&e.__esModule?()=>e.default:()=>e;return t.d(r,"a",r),r}),t.o=((e,t)=>Object.prototype.hasOwnProperty.call(e,t)),t.p="",t(t.s=0)})([function(e,t,r){function n(e){return new l((t,r)=>{let{done:n,value:o}=r?r.next():{done:!0};return n?e(t,e=>e):e(t,e=>o[a](e,r))})}function o(e){return new l((t,r)=>{let{done:n,value:o}=r?r.next():{done:!0};if(n)return e(t,e=>e);{let n=!0,i=e(t,e=>{if(!n)throw`The 'next' function was called twice; for library performance, optics calling 'next' more than once must be created with 'traversal' in place of 'optic'`;return n=!1,o[a](e,r)});return r.return&&r.return(),i}})}function i(e,t){return n((r,n)=>t(r,n(e(r))),!1)}function c(e){return e.map(e=>"string"==typeof e||"number"==typeof e?f(e):e instanceof Array?s(...e):e instanceof Function?n((t,r)=>r(e(t))):e)}function s(...e){let t=c(e),r=t[Symbol.iterator]();return r.next(),new l((e,n)=>{let o=t[0][a](e,function*(){yield*r,void 0!==n&&(yield*n)}());return r.return&&r.return(),o})}function u(e){return new l((t,r)=>{let{done:n,value:o}=r?r.next():{done:!0};if(n)return e(t,e=>e);{let i=[];for(;!n;)i.push(o),({done:n,value:o}=r.next());return e(t,e=>{let t=i[Symbol.iterator](),{done:r,value:n}=t.next(),o=r?e:n[a](e,t);return t.return&&t.return(),o})}})}Object.defineProperty(t,"__esModule",{value:!0}),t.optic=o,t.lens=i,t.compose=s,t.chain=((...e)=>n((t,r)=>r(c(e).reduce((e,t)=>p(t,e),t)),!1)),t.traversal=u;const a=Symbol("exec");class l{constructor(e){this[a]=e}}let p=t.view=((e,t)=>e instanceof l?e[a](t):s(e)[a](t)),f=t.pluck=(e=>i(t=>t[e],(t,r)=>{if(t[e]===r)return t;{let n=t instanceof Array?t.map(e=>e):Object.assign({},t);if("number"==typeof e&&!t instanceof Array)throw new Error("The 'pluck' lens will not assign numeric member keys to non-Arrays");if("string"==typeof e&&!t instanceof Object)throw new Error("The 'pluck' lens will not assign string member keys to non-Objects");return n[e]=r,n}}));t.inject=((e,t)=>i(e=>e,(r,n)=>{if(t===n[e])return r;{let r=Object.assign({},n);return r[e]=t,r}})),t.remove=(e=>i(e=>e,(t,r)=>{if(!e in r)return r;{let t=Object.assign({},r);return delete t[e],t}})),t.where=(e=>o((t,r)=>e(t)?r(t):t)),t.each=(()=>u((e,t)=>{let r;return e instanceof Object?(r=Object.keys(e).reduce((r,n)=>(r[n]=t(e[n]),r),{}),Object.keys(r).reduce((e,t)=>r[t]===e[t]?e:r,e)):e instanceof Array?(r=e.reduce((e,r,n)=>(e[n]=t(r),e),[])).reduce((e,t,n)=>t===e[n]?e:r,e):e}))}])})}])});